<% layout('partials/layout') %>

<a href="/admin" class="btn">‚Üê Volver</a>
<h2>üë• Usuarios</h2>

<div class="card">
  <table class="table">
    <thead>
      <tr>
        <th>#</th>
        <th>Nombre</th>
        <th>Email</th>
        <th>Rol</th>
        <th>C√©dula</th>
        <th>Tel√©fono</th>
        <th>Estado</th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <% usuarios.forEach(u => { %>
        <tr>
          <td><%= u.id %></td>
          <td><%= u.nombre %></td>
          <td><%= u.email %></td>

          <!-- ROL -->
          <td>
            <form method="POST" action="/admin/usuarios/<%= u.id %>/rol"
                  style="display:flex; gap:8px; align-items:center">

              <select name="rol" class="input">
                <option value="user"  <%= u.rol==='user' ? 'selected' : '' %>>user</option>
                <option value="admin" <%= u.rol==='admin'?'selected':'' %>>admin</option>
              </select>

          </td>

          <td><%= u.cedula || '-' %></td>
          <td><%= u.telefono || '-' %></td>

          <!-- ESTADO -->
          <td>
              <select name="estado" class="input">
                <option value="activo"    <%= u.estado==='activo'?'selected':'' %>>Activo</option>
                <option value="inactivo"  <%= u.estado==='inactivo'?'selected':'' %>>Inactivo</option>
              </select>
          </td>

          <td>
              <button class="btn-primary">Guardar</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
