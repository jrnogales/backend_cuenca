<% layout('partials/layout') %>

<a href="/admin" class="btn">‚Üê Volver</a>
<h2>üéí Paquetes</h2>

<div class="card" style="margin-bottom:16px">
  <h3>Nuevo paquete</h3>
  <form method="POST" action="/admin/paquetes/save" style="display:grid;grid-template-columns:repeat(6,1fr);gap:8px">
    <input name="codigo" placeholder="C√≥digo" required>
    <input name="titulo" placeholder="T√≠tulo" required>
    <input name="precio_adulto" placeholder="Precio adulto" type="number" step="0.01" required>
    <input name="precio_nino" placeholder="Precio ni√±o" type="number" step="0.01" required>
    <input name="stock" placeholder="Stock" type="number" min="0" required>
    <input name="imagen" placeholder="URL imagen">
    <textarea name="descripcion" placeholder="Descripci√≥n" style="grid-column:1/7"></textarea>
    <button class="btn-primary" style="grid-column:1/2">Guardar</button>
  </form>
</div>

<div class="card">
  <table class="table">
    <thead>
      <tr>
        <th>#</th><th>C√≥digo</th><th>T√≠tulo</th><th>Adulto</th><th>Ni√±o</th><th>Stock</th><th></th>
      </tr>
    </thead>
    <tbody>
      <% paquetes.forEach(p => { %>
        <tr>
          <td><%= p.id %></td>
          <td><%= p.codigo %></td>
          <td><%= p.titulo %></td>
          <td>$<%= Number(p.precio_adulto).toFixed(2) %></td>
          <td>$<%= Number(p.precio_nino).toFixed(2) %></td>
          <td><%= p.stock %></td>
          <td>
            <details>
              <summary>Editar</summary>
              <form method="POST" action="/admin/paquetes/save" style="display:grid;grid-template-columns:repeat(6,1fr);gap:8px;margin-top:8px">
                <input type="hidden" name="id" value="<%= p.id %>">
                <input name="codigo" value="<%= p.codigo %>">
                <input name="titulo" value="<%= p.titulo %>">
                <input name="precio_adulto" type="number" step="0.01" value="<%= p.precio_adulto %>">
                <input name="precio_nino"   type="number" step="0.01" value="<%= p.precio_nino %>">
                <input name="stock" type="number" value="<%= p.stock %>">
                <input name="imagen" value="<%= p.imagen||'' %>">
                <textarea name="descripcion" style="grid-column:1/7"><%= p.descripcion||'' %></textarea>
                <button class="btn-primary" style="grid-column:1/2">Actualizar</button>
              </form>
            </details>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
