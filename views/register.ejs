<% layout('partials/layout') %>

<div style="
  max-width:480px;
  margin:40px auto;
  background:white;
  padding:32px;
  border-radius:16px;
  box-shadow:0 6px 20px rgba(0,0,0,0.08);
">

  <h2 style="text-align:center; margin-bottom:8px;">Regístrate</h2>
  <p style="text-align:center; color:#6b7280; margin-bottom:24px;">
    Completa tus datos para continuar.
  </p>

  <form id="regForm" method="POST" action="/register">

    <!-- Nombre -->
    <input id="nombre" name="nombre" type="text" placeholder="Tu nombre"
      class="inp" required>

    <div class="msg" id="msg-nombre"></div>

    <!-- Apellido -->
    <input id="apellido" name="apellido" type="text" placeholder="Tu apellido"
      class="inp" required>

    <div class="msg" id="msg-apellido"></div>

    <!-- Cédula -->
    <input id="cedula" name="cedula" type="text" placeholder="Cédula (10 dígitos)"
      class="inp" maxlength="10" required>

    <div class="msg" id="msg-cedula"></div>

    <!-- Email -->
    <input id="email" name="email" type="email" placeholder="ejemplo@correo.com"
      class="inp" required>

    <div class="msg" id="msg-email"></div>

    <!-- Teléfono -->
    <input id="telefono" name="telefono" type="text" placeholder="Teléfono (10 dígitos)"
      class="inp" maxlength="10" required>

    <div class="msg" id="msg-telefono"></div>

    <!-- Contraseña -->
    <input id="password" name="password" type="password"
      placeholder="Contraseña (mínimo 6 caracteres)"
      class="inp" minlength="6" required>

    <div class="msg" id="msg-password"></div>

    <button id="btnReg" class="btn-primary" style="width:100%; margin-top:20px;" disabled>
      Registrar
    </button>
  </form>
</div>

<style>
  .inp {
    width:100%; padding:12px 14px;
    border:1px solid #ddd; border-radius:10px;
    margin-bottom:6px; outline:none; transition:.2s;
  }
  .inp.ok { border-color:#10b981; }
  .inp.err { border-color:#ef4444; }

  .msg {
    min-height:16px;
    font-size:13px;
    margin-bottom:10px;
    color:#ef4444;
  }
</style>

<script>
  const f = document.getElementById("regForm");
  const btn = document.getElementById("btnReg");

  // Campos
  const nombre = document.getElementById("nombre");
  const apellido = document.getElementById("apellido");
  const cedula = document.getElementById("cedula");
  const email = document.getElementById("email");
  const telefono = document.getElementById("telefono");
  const password = document.getElementById("password");

  // Mensajes
  const mNombre = document.getElementById("msg-nombre");
  const mApellido = document.getElementById("msg-apellido");
  const mCedula = document.getElementById("msg-cedula");
  const mEmail = document.getElementById("msg-email");
  const mTelefono = document.getElementById("msg-telefono");
  const mPassword = document.getElementById("msg-password");

  function validar() {
    let ok = true;

    // Nombre
    if (nombre.value.trim().length < 1) {
      nombre.className = "inp err";
      mNombre.textContent = "Ingrese su nombre.";
      ok = false;
    } else {
      nombre.className = "inp ok";
      mNombre.textContent = "";
    }

    // Apellido
    if (apellido.value.trim().length < 1) {
      apellido.className = "inp err";
      mApellido.textContent = "Ingrese su apellido.";
      ok = false;
    } else {
      apellido.className = "inp ok";
      mApellido.textContent = "";
    }

    // Cédula (exactamente 10 números)
    if (!/^[0-9]{10}$/.test(cedula.value)) {
      cedula.className = "inp err";
      mCedula.textContent = "Debe tener 10 dígitos.";
      ok = false;
    } else {
      cedula.className = "inp ok";
      mCedula.textContent = "";
    }

    // Email que termine en .com
    if (!/^[^\s@]+@[^\s@]+\.com$/.test(email.value)) {
      email.className = "inp err";
      mEmail.textContent = "Ingrese un email válido que termine en .com";
      ok = false;
    } else {
      email.className = "inp ok";
      mEmail.textContent = "";
    }

    // Teléfono (exactamente 10 dígitos)
    if (!/^[0-9]{10}$/.test(telefono.value)) {
      telefono.className = "inp err";
      mTelefono.textContent = "Debe tener 10 dígitos.";
      ok = false;
    } else {
      telefono.className = "inp ok";
      mTelefono.textContent = "";
    }

    // Contraseña
    if (password.value.length < 6) {
      password.className = "inp err";
      mPassword.textContent = "Mínimo 6 caracteres.";
      ok = false;
    } else {
      password.className = "inp ok";
      mPassword.textContent = "";
    }

    btn.disabled = !ok;
  }

  [nombre, apellido, cedula, email, telefono, password].forEach(c => {
    c.addEventListener("input", validar);
  });
</script>
